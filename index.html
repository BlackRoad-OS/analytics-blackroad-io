<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - BlackRoad OS</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #000000;
            --bg-secondary: #0f0f0f;
            --bg-tertiary: #1a1a1a;
            --text: #ffffff;
            --text-muted: #888888;
            --accent-orange: #FF9D00;
            --accent-pink: #FF0066;
            --accent-purple: #7700FF;
            --accent-blue: #0066FF;
            --border: rgba(255, 255, 255, 0.1);
            --success: #00ff00;
            --warning: #ffff00;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            padding: 2rem;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent-orange), var(--accent-pink), var(--accent-purple), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.75rem 1.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--accent-purple);
            color: #fff;
            border-color: var(--accent-purple);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-change {
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .stat-change.up { color: var(--success); }
        .stat-change.down { color: var(--warning); }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .chart-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .chart-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .chart-action {
            color: var(--accent-purple);
            font-size: 0.9rem;
            cursor: pointer;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .chart-container.large {
            height: 400px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            text-align: left;
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.85rem;
        }

        .table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge.high { background: rgba(0, 255, 0, 0.2); color: var(--success); }
        .badge.medium { background: rgba(255, 255, 0, 0.2); color: var(--warning); }
        .badge.low { background: rgba(255, 255, 255, 0.1); color: var(--text-muted); }

        @media (max-width: 1024px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“Š Analytics Dashboard</h1>
            <p>Real-time insights into your BlackRoad usage and performance</p>
        </div>

        <div class="filters">
            <button class="filter-btn active">Last 7 Days</button>
            <button class="filter-btn">Last 30 Days</button>
            <button class="filter-btn">Last 90 Days</button>
            <button class="filter-btn">All Time</button>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Total Requests</div>
                <div class="stat-value" id="totalRequests">2.4M</div>
                <div class="stat-change up">â†‘ 23.5% vs last period</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Avg Response Time</div>
                <div class="stat-value" id="avgResponse">124ms</div>
                <div class="stat-change up">â†“ 12% faster</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Success Rate</div>
                <div class="stat-value" id="successRate">99.8%</div>
                <div class="stat-change up">â†‘ 0.3%</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Active Users</div>
                <div class="stat-value" id="activeUsers">8,432</div>
                <div class="stat-change up">â†‘ 15.2%</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card full-width">
                <div class="chart-header">
                    <h2 class="chart-title">API Requests Over Time</h2>
                    <span class="chart-action">Export Data â†’</span>
                </div>
                <div class="chart-container large">
                    <canvas id="requestsChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Response Times</h2>
                    <span class="chart-action">Details â†’</span>
                </div>
                <div class="chart-container">
                    <canvas id="responseChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Status Codes</h2>
                    <span class="chart-action">Details â†’</span>
                </div>
                <div class="chart-container">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Usage by Region</h2>
                    <span class="chart-action">View Map â†’</span>
                </div>
                <div class="chart-container">
                    <canvas id="regionChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h2 class="chart-title">Agent Performance</h2>
                    <span class="chart-action">Details â†’</span>
                </div>
                <div class="chart-container">
                    <canvas id="agentChart"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">
                <h2 class="chart-title">Top Endpoints</h2>
                <span class="chart-action">View All â†’</span>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th>Endpoint</th>
                        <th>Requests</th>
                        <th>Avg Response</th>
                        <th>Success Rate</th>
                        <th>Traffic</th>
                    </tr>
                </thead>
                <tbody id="endpointsTable"></tbody>
            </table>
        </div>
    </div>

    <script>
        // Chart configurations
        const chartDefaults = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: { color: '#888888' }
                }
            },
            scales: {
                y: {
                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                    ticks: { color: '#888888' }
                },
                x: {
                    grid: { display: false },
                    ticks: { color: '#888888' }
                }
            }
        };

        // Generate time labels
        const generateLabels = (days) => {
            const labels = [];
            for (let i = days - 1; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                labels.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
            }
            return labels;
        };

        // Generate random data
        const generateData = (days, min, max) => {
            return Array.from({ length: days }, () => Math.floor(Math.random() * (max - min + 1)) + min);
        };

        // 1. Requests Over Time (Area Chart)
        new Chart(document.getElementById('requestsChart'), {
            type: 'line',
            data: {
                labels: generateLabels(30),
                datasets: [{
                    label: 'API Requests',
                    data: generateData(30, 50000, 100000),
                    borderColor: '#7700FF',
                    backgroundColor: 'rgba(119, 0, 255, 0.1)',
                    fill: true,
                    tension: 0.4
                }, {
                    label: 'Quantum Simulations',
                    data: generateData(30, 1000, 5000),
                    borderColor: '#0066FF',
                    backgroundColor: 'rgba(0, 102, 255, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: chartDefaults
        });

        // 2. Response Times (Line Chart)
        new Chart(document.getElementById('responseChart'), {
            type: 'line',
            data: {
                labels: generateLabels(7),
                datasets: [{
                    label: 'p50',
                    data: generateData(7, 80, 120),
                    borderColor: '#00ff00',
                    tension: 0.4
                }, {
                    label: 'p95',
                    data: generateData(7, 150, 250),
                    borderColor: '#ffff00',
                    tension: 0.4
                }, {
                    label: 'p99',
                    data: generateData(7, 300, 500),
                    borderColor: '#ff0000',
                    tension: 0.4
                }]
            },
            options: chartDefaults
        });

        // 3. Status Codes (Doughnut Chart)
        new Chart(document.getElementById('statusChart'), {
            type: 'doughnut',
            data: {
                labels: ['200 OK', '201 Created', '400 Bad Request', '429 Rate Limit', '500 Error'],
                datasets: [{
                    data: [85, 10, 3, 1.5, 0.5],
                    backgroundColor: [
                        '#00ff00',
                        '#0066FF',
                        '#FF9D00',
                        '#ffff00',
                        '#ff0000'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { color: '#888888' }
                    }
                }
            }
        });

        // 4. Usage by Region (Bar Chart)
        new Chart(document.getElementById('regionChart'), {
            type: 'bar',
            data: {
                labels: ['US-East', 'US-West', 'EU', 'Asia', 'Other'],
                datasets: [{
                    label: 'Requests',
                    data: [450000, 380000, 320000, 280000, 120000],
                    backgroundColor: [
                        '#FF9D00',
                        '#FF0066',
                        '#7700FF',
                        '#0066FF',
                        '#888888'
                    ]
                }]
            },
            options: {
                ...chartDefaults,
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // 5. Agent Performance (Horizontal Bar)
        new Chart(document.getElementById('agentChart'), {
            type: 'bar',
            data: {
                labels: ['lucidia-v2', 'alice-migration', 'code-analyzer', 'quantum-sim', 'data-processor'],
                datasets: [{
                    label: 'Uptime %',
                    data: [99.98, 99.95, 99.99, 99.92, 99.97],
                    backgroundColor: '#7700FF'
                }]
            },
            options: {
                ...chartDefaults,
                indexAxis: 'y',
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        min: 99,
                        max: 100,
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#888888' }
                    },
                    y: {
                        grid: { display: false },
                        ticks: { color: '#888888' }
                    }
                }
            }
        });

        // Populate endpoints table
        const endpoints = [
            { path: '/api/v1/inference', requests: '1.2M', response: '89ms', success: '99.9%', traffic: 'high' },
            { path: '/api/v1/quantum/simulate', requests: '856K', response: '134ms', success: '99.8%', traffic: 'high' },
            { path: '/api/v1/agents', requests: '432K', response: '45ms', success: '99.9%', traffic: 'medium' },
            { path: '/api/v1/models', requests: '234K', response: '67ms', success: '100%', traffic: 'medium' },
            { path: '/api/v1/analytics', requests: '156K', response: '23ms', success: '99.9%', traffic: 'low' }
        ];

        document.getElementById('endpointsTable').innerHTML = endpoints.map(endpoint => `
            <tr>
                <td><code>${endpoint.path}</code></td>
                <td>${endpoint.requests}</td>
                <td>${endpoint.response}</td>
                <td>${endpoint.success}</td>
                <td><span class="badge ${endpoint.traffic}">${endpoint.traffic}</span></td>
            </tr>
        `).join('');

        // Real-time updates
        setInterval(() => {
            const stats = ['totalRequests', 'avgResponse', 'successRate', 'activeUsers'];
            stats.forEach(stat => {
                const el = document.getElementById(stat);
                if (el) {
                    const current = el.textContent;
                    // Simulate small changes
                    if (stat === 'avgResponse') {
                        const value = parseInt(current);
                        el.textContent = (value + Math.floor(Math.random() * 10 - 5)) + 'ms';
                    }
                }
            });
        }, 10000);
    </script>
</body>
</html>
